---
title: '神秘的百分之37与自然常数e'
pubDate: '2020-2-15'
mathjax: true
description: '关于自然常熟e的有趣的小知识'
tag: 'math'
---

# 1. 引言

**据传说这是苏格拉底给他的学生提出的问题：**

三个人走过同一块麦田，各自可以摘一株麦穗。期间只能摘一次，并且只可向前走，不能回头。
第一个人走进麦田，很快就发现了一棵他认为很大的麦穗，便迫不及待地将它摘了下来。但当他继续前行时，很快就后悔了，因为和接下来他所看见的麦穗相比，手中的这一棵实在太小了，但他也只好带着这棵走向麦田的另一端。他只能留下无尽的懊悔。
第二个人走进麦田后，看见每一株麦穗都觉得很大很饱满，他东张西望，不知道选哪株好，每次想动手摘一株麦穗，生怕错过了最好的那株，于是他始终不急于动手。可当他快要走到麦田尽头时，才发现自己已经错过了最好的机会，只好随手摘下还算大的麦穗。
第三个人走进了麦田，他先用目光把麦地分成了三大块，然后往里走。在走过第一块时，他看见很多大麦穗，并没有立刻去摘，走到中间一块时，他发现这里的麦穗普遍较大，于是就在这儿选择了最大的一棵，走出最后一块麦田，虽然也许会看见比手中这棵更大的麦穗，但他不再后悔，因为他觉得自己已经得到了最大的麦穗。

# 2. 扩展

这个问题的产生非常诡异——始于**谈恋爱**。

## 原文如下:

在每期《非诚勿扰》节目上，面对一位位男嘉宾，24 位单身女生要做出不止一次“艰难的决定”：到底要不要继续亮灯？把灯灭掉意味着放弃了这一次机会，继续亮灯则有可能结束节目之旅，放弃了未来更多的选择。

在现实中，面对男生们前仆后继的表白，MM 们也少不了这样的纠结。如果遇到了一个优秀的男生，应该接受还是拒绝呢？如果接受了他，万一下一个更好的话那可就亏大了；可如果为此而拒绝掉一个又一个好男人，也会面对着“过了这个村就没这个店”的风险。说不定白马王子们都已经擦肩而过，到最后就只剩下了猥琐男了，当初的拒绝明显得不偿失。

由于没人能知道真正的缘分何时到来，没人能知道下一个来求爱的男生会是什么样子，接受表白的时机早晚实在很难决定。怎么办？去向《非诚勿扰》的黄菡老师和乐嘉老师请教一下？其实你还可以向欧拉老师请教一下。你没听错。大数学家欧拉对一个神秘的数学常数 e ≈ 2.718 深有研究，这个数字和“拒人问题”竟然有着直接的联系。

## “拒人问题”的数学模型：

为了便于我们分析，让我们把生活中各种复杂纠纷的恋爱故事抽象成一个简单的数学过程。假设根据过去的经验，MM 可以确定出今后将会遇到的男生个数，比如说 15 个、30 个或者 50 个。不妨把男生的总人数设为 n。这 n 个男生将会以一个随机的顺序排着队依次前来表白。每次被表白后，MM 都只有两种选择：接受这个男生，结束这场“征婚游戏”，和他永远幸福地生活在一起；或者拒绝这个男生，继续考虑下一个表白者。我们不考虑 MM 脚踏两只船的情况，也不考虑和被拒男生破镜重圆的可能。最后，男人有好有坏，我们不妨假设 MM 心里会给男生们的优劣排出个名次来。

聪明的 MM 会想到一个好办法：先和前面几个男生玩玩，试试水深；大致摸清了男生们的底细后，再开始认真考虑，和第一个比之前所有人都要好的男生发展关系。从数学模型上说，就是先拒掉前面 k 个人，不管这些人有多好；然后从第 k+1 个人开始，一旦看到比之前所有人都要好的人，就毫不犹豫地选择他。不难看出，k 的取值很讲究，太小了达不到试的效果，太大了又会导致真正可选的余地不多了。这就变成了一个纯数学问题：在男生总数 n 已知的情况下，当 k 等于何值时，按上述策略选中最佳男生的概率最大？

# 3. 证明：

首先，放出概率公式：

$$

P(k)=\sum_{i=k+1}^{n} \frac{1}{n} \cdot \frac{k}{i-1}=\frac{k}{n} \sum_{i=k+1}^{n} \frac{1}{i-1}

$$

## 3.1 公式产生

公式之中的`i`表示随机态下最佳男生所在的位置，显然这样的位置有`n`个，现在我们计算其中的一个位置时的情况就需要在前面除以`n`。

进一步，要使MM每一次都精准无误地选到最佳男生，需要保证前i-1个人中最优秀的在前k个人之中，这样当MM与前k个男生试过水之后，直到遇到第`i`个男生，MM才会遇到比前边所有男生都要好的男生，自然而然地，MM就会精准无误地选择到最佳男生，也就是第`i`个位置啦！

所以这就是公式中`k/(i-1)`这一项的来历。

## 3.2 问题求解

首先我们要证明一个非常重要的定理：

$$

对于任意正实数x，恒有\\
 x \ge \ln (x + 1)
\\
证明如下：
\\
令 f(x) = x - \ln (x + 1)
\\
则当x = 0时，f(0) = 0
\\
f(x)' = 1 - \frac{1}{{x + 1}} = \frac{x}{{x + 1}}
\\
当x>0时，恒有f(x)'>0
\\
\therefore f(x) 在(0, + \infty )是增函数
\\
又\because f(0) = 0
\\
\therefore在x>0时，恒有f(x)>0
\\
即x > \ln (x + 1)
\\
然后回到我们的概率公式：
\\
P(k) = \frac{k}{n}\sum\limits_{i = k + 1}^n {\frac{1}{ { {\text{i - 1} } } } = \frac{k}{n}(\frac{1}{k} + \frac{1}{ {k + 1} } + \frac{1}{ {k + 2} } + ... + \frac{1}{ {n - 1} })}
\\
\geqslant \frac{ {\text{k} } }{n}(\ln \frac{ {k + 1} }{k} + \ln \frac{ {k + 2} }{ {k + 1} } + \ln \frac{ {k + 3} }{ {k + 2} } + ... + \ln \frac{n}{ {n - 1} }) 
\\
= \frac{k}{n}\ln \frac{n}{k}
\\
令x=\frac{n}{k}，F(x)=\frac{ {\ln (x)} }{x}
\\
F(x)' = \frac{ {\ln (x)'x - x'\ln (x)} }{ { {x^2} } } = \frac{ {1 - \ln (x)} }{ { {x^2} } }
\\
显然有当x=e时F(x)'=0
\\
此时F(x)取最大值\frac{1}{e}
\\
 \because x=\frac{n}{k}
\\
\therefore k=\frac{n}{e}
$$

第二行的大于等于号决定了后面所计算的37%是在最坏情况下的最大值，实际情况受多种因素影响，但一般都要比37%要好。

# 4. 结论

也就是说，如果你预计求爱者有 n 个人，你应该先拒绝掉前 n/e 个人，静候下一个比这些人都好的人。假设你一共会遇到大概 30 个求爱者，就应该拒绝掉前 30/e ≈ 30/2.718 ≈ 11 个求爱者，然后从第 12 个求爱者开始，一旦发现比前面 11 个求爱者都好的人，就果断接受他。由于 1/e 大约等于 37%，因此这条爱情大法也叫做 37% 法则。

不过，37% 法则有一个小问题：如果最佳人选本来就在这 37% 的人里面，错过这 37% 的人之后，她就再也碰不上更好的了。但在游戏过程中，她并不知道最佳人选已经被拒，因此她会一直痴痴地等待。也就是说，MM 将会有 37% 的概率“失败退场”，或者以被迫选择最后一名求爱者的结局而告终。

## 来自网上的实测：

![](https://cdn.jsdelivr.net/gh/wjsoj/pic/img/20200217001343.png)

# 5. 应用

其实除了在恋爱问题中解决选择问题，这个“37%法则”还可以在很多方面帮助选择困难症患者。比如在我们选择购房的时候，我们可以先划定一个房源范围，在考察了房源数量的37%后，碰到比较中意的房子立即购买，这样就有较大的概率选购到合适的房源而不至于长时间的犹豫不决。

同样，这一法则还可以用于更多生活场景中，帮助我们在一定范围内做出最好的选择。

# 6. 另一种声音

来自[NullMoneyException的博客园](https://www.cnblogs.com/shijt/)]

有人以以上数学模型来解决 恋爱问题，我觉得不妥，原因有3：

1.我们不必总是找到最好的那个作为伴侣，可以接受一个相对较好的；

2.我们不能接受很差的人作为伴侣，（当只剩下一个人时，我们就没得选）；

3.我们最终是为了找到伴侣，找到比找到最好的更为重要。

## 重新建立问题：

　　已知在一个无序的集合 N 中（集合大小已知），一次只能查看一个数，查看后选择是否取出这个数，在只能取一次的情况下，怎么取到集合 N 中的较大数？

　　假设我们不必取到最大的数，而是以最大数的90%作为基准，大于90%则为符合需求的数，那么取得较大数的概率为多少？

## 分析：

我们和上面解法1一样，用大量的模拟实验来计算频率，并用频率估算概率。

代码如下：

``` python
#Author:shijt
import random
import time

random_list = []
for i in range(100):
    random_list.append(random.randint(1, 10000))

def getMaxBase(number, random_list):
    return max(random_list[:number])*0.9

def getMaxGuess(number, random_list):
    max_guess = getMaxBase(number, random_list)
    for i in range(number,100):
        if (random_list[i] >= max_guess or i == 99):
            max_guess = random_list[i]
            break
    return max_guess

for j in range(1,100):
    count = 0
    for i in range(10000):
        random_list = []
        for i in range(100):
            random_list.append(random.randint(1, 10000))
        if (getMaxGuess(j, random_list) >= getMaxBase(100, random_list)):
            count += 1
    print(j,count, count / 10000)
```

## 结果：

![随机生成的数据表格](https://cdn.jsdelivr.net/gh/wjsoj/pic/img/1230826-20180629145715110-2139269787.png)

当选择63-65%的数作为参考时，可以得到 较大数 的概率较高，约等于95.7%，可以说远远高于 37%了，这才比较适合作为 恋爱问题的解法。

>  PS：当你愿意降低要求到85%时，你会发现，找到伴侣的概率约为 99%，还怕 找不到对象 吗？
>
> 以上仅能作为参考，毕竟人心比数学复杂的多